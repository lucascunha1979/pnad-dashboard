
<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>Painel Interativo ‚Ä¢ PNAD Cont√≠nua v15</title>
<script src="https://cdn.plot.ly/plotly-2.31.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
<style>
body {font-family: Arial, sans-serif; background: #f7f9fc; color: #222; margin: 0; padding: 0;}
header {background: #002b5c; color: white; text-align: center; padding: 12px; font-size: 1.2em;}
footer {text-align: center; padding: 16px; color: #666; font-size: 0.85em;}
</style>
</head>
<body>

<header>üìä Painel Interativo ¬∑ PNAD Cont√≠nua v15</header>

<main style="max-width:1200px; margin:auto; padding:20px;">
<h2 style="text-align:center; color:#002b5c;">Indicadores de Trabalho e Emprego</h2>
<div id="grafico" style="height:500px;"></div>

<table border="1" cellspacing="0" cellpadding="6" style="width:100%; border-collapse:collapse; text-align:center; font-size:0.9em; margin-top:20px;">
<thead style="background:#002b5c; color:white;">
<tr>
<th>Governo</th>
<th>In√≠cio</th>
<th>Fim</th>
<th>M√©dia</th>
<th>M√≠nimo</th>
<th>M√°ximo</th>
<th>Varia√ß√£o (%)</th>
<th>Varia√ß√£o vs. governo anterior (%)</th>
</tr>
</thead>
<tbody id="tabela"></tbody>
</table>
</main>

<footer id="rodape"></footer>

<script>
// Simula√ß√£o de dados da tabela (substitua pelo carregamento real do CSV)
const dados = [
  {governo:"Jos√© Ivo Sartori",inicio:"2015-01-01",fim:"2019-01-01",media:33.10,min:31.60,max:34.40,var_intra:8.9},
  {governo:"Eduardo Leite (1¬∫)",inicio:"2019-01-01",fim:"2022-03-31",media:33.28,min:32.40,max:33.70,var_intra:4.0},
  {governo:"Ranolfo Vieira J√∫nior",inicio:"2022-03-31",fim:"2023-01-01",media:32.13,min:31.60,max:32.90,var_intra:4.1},
  {governo:"Eduardo Leite (2¬∫)",inicio:"2023-01-01",fim:"2026-01-01",media:32.04,min:31.10,max:33.00,var_intra:6.1}
];

// Calcular varia√ß√£o entre governos consecutivos
for (let i = 0; i < dados.length; i++) {
  if (i === 0) {
    dados[i].var_entre = "‚Äì";
  } else {
    const anterior = dados[i-1].media;
    const atual = dados[i].media;
    const dif = ((atual - anterior) / anterior) * 100;
    dados[i].var_entre = dif.toFixed(1) + "%";
  }
}

// Preencher tabela
const corpo = document.getElementById("tabela");
dados.forEach(d => {
  const linha = document.createElement("tr");
  linha.innerHTML = `
    <td>${d.governo}</td>
    <td>${d.inicio}</td>
    <td>${d.fim}</td>
    <td>${d.media.toFixed(2)}</td>
    <td>${d.min.toFixed(2)}</td>
    <td>${d.max.toFixed(2)}</td>
    <td>${d.var_intra.toFixed(1)}%</td>
    <td>${d.var_entre}</td>
  `;
  corpo.appendChild(linha);
});

// Criar gr√°fico com quebra autom√°tica no t√≠tulo
const tituloBase = "Rio Grande do Sul: Pessoas de 14 anos ou mais de idade, na for√ßa de trabalho, na semana de refer√™ncia";
const tituloQuebrado = tituloBase.replace(/: /, ":<br>");

const trace1 = {
  x: ["2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025"],
  y: [32.1, 32.5, 33.0, 33.2, 33.1, 33.0, 32.8, 32.6, 32.4, 32.2, 32.0],
  mode: "lines+markers",
  name: "Total",
  line: {color: "#1f77b4"}
};

const layout = {
  title: {text: tituloQuebrado, font: {size: 16}, x: 0.5, xanchor: "center"},
  xaxis: {title: "Ano"},
  yaxis: {title: "Valor (%)"},
  height: 500,
  plot_bgcolor: "#fff",
  paper_bgcolor: "#f7f9fc"
};

Plotly.newPlot("grafico", [trace1], layout);

// Rodap√© com data autom√°tica
const hoje = new Date();
const dataFormatada = hoje.toLocaleDateString('pt-BR', {year:'numeric', month:'2-digit', day:'2-digit'});
document.getElementById("rodape").innerHTML = "üìÖ Atualizado em: " + dataFormatada;
</script>

</body>
</html>
